name: "Debug Validate GCP SA JSON"

on:
  workflow_dispatch:

jobs:
  validate-sa:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout"
        uses: actions/checkout@v4

      - name: "Install jq"
        run: sudo apt-get update && sudo apt-get install -y jq

      - name: "Debug: write and validate SA JSON"
        run: |
          echo "${{ secrets.GCP_SA_KEY }}" > /tmp/sa.json
          echo "Size (bytes): $(wc -c < /tmp/sa.json)"
          jq -e . /tmp/sa.json
